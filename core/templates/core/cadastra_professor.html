{% extends 'core/base.html' %}
{% load static %}
{% load bootstrap %}

{% block main %}

{% include 'core/menu.html' %}

{% comment %} <h1><a href="{% url 'core_professores_cadastrados' %}">Ver Professores cadastrados</a></h1><br><br> {% endcomment %}
<br><h1>Cadastro de Professor</h1><br>

<form action="{% url 'core_cadastra_professor' %}" method="POST" id="pessoaForm" data-professores-url="{% url 'ajax_load_professores' %}">
    {% csrf_token %}

    {{ form|bootstrap }}

    <button type="submit" class="btn btn-primary">Cadastrar</button>
</form>

    
<script src="{% static "jquery.js" %}"></script>
<script>
  $(document).ready(function() {
    function carrega_prof(){
      var url = $("#pessoaForm").attr("data-professores-url");  // get the url of the `load_cities` view
      var academiaId = $("#id_Academia").val();  // get the selected country ID from the HTML input

      $.ajax({                       // initialize an AJAX request
          url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
          data: {
              'Academia': academiaId       // add the country id to the GET parameters
          },
          success: function (data) {   // `data` is the return of the `load_cities` view function
              $("#id_Professor").html(data);  // replace the contents of the city input with the data that came from the server
          }
      });
    };

    //if( $('#id_ProfessorAluno').length ){
    if($('#id_ProfessorAluno').is(":checked")){
      // Uncheck
      // $("#checkbox").prop("checked", false);
    } else{
      $('#id_Professor').parent().parent().hide();
      $('#id_UltimaAnuidade').parent().parent().hide();
    }
    //} 

    $('#id_ProfessorAluno').on('change', function (e) {
      if(this.checked != true){
        $('#id_Professor').parent().parent().hide();
        $('#id_UltimaAnuidade').parent().parent().hide();
        $("#id_Professor").html("<option value selected>---------</option>");
      } else {
        carrega_prof();
        $('#id_Professor').parent().parent().show();
        $('#id_UltimaAnuidade').parent().parent().show();
      }
    });

    $("#id_Academia").change(function () {
      if($('#id_ProfessorAluno').is(":checked")){            
        carrega_prof();
      } else{
        $("#id_Professor").html("<option value selected>---------</option>");
      };
    });

  });
</script>
{% endblock %}